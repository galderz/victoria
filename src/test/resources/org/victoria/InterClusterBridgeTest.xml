<?xml version="1.0" encoding="UTF-8"?>

<deployment xmlns="urn:jboss:bean-deployer:2.0">

   <bean name="DefaultCacheFactory" class="org.jboss.cache.DefaultCacheFactory">      
      <constructor factoryClass="org.jboss.cache.DefaultCacheFactory" factoryMethod="getInstance" />
   </bean>

   <!-- bean name="ConfCacheClusterA" class="org.jboss.cache.config.Configuration">
      <property name="clusterName">CacheClusterA</property>
      <property name="multiplexerStack">${jboss.default.jgroups.stack:udp}</property>
      <property name="cacheModeString">REPL_SYNC</property>
      <property name="listenerAsyncPoolSize">0</property>
   </bean -->

   <bean name="ConfCacheClusterA" class="org.jboss.cache.config.Configuration">
      <property name="clusterName">CacheClusterA</property>
      <property name="jgroupsConfigFile">src/test/resources/jgroups/udpA.xml</property>
      <!--  property name="multiplexerStack">${jboss.default.jgroups.stack:udp}</property -->
      <property name="cacheModeString">REPL_SYNC</property>
      <property name="listenerAsyncPoolSize">0</property>
   </bean>
   
   <!--  bean name="ConfCacheClusterA2" class="org.jboss.cache.config.Configuration">
      <property name="clusterName">CacheClusterA</property>
      <property name="multiplexerStack">${jboss.default.jgroups.stack:udp}</property>
      <property name="cacheModeString">REPL_SYNC</property>
      <property name="listenerAsyncPoolSize">0</property>
   </bean -->

   <!-- bean name="ConfCacheClusterA2" class="org.jboss.cache.config.Configuration">
      <property name="clusterName"><inject bean="ConfCacheClusterA1" property="clusterName"/></property>
      <property name="multiplexerStack"><inject bean="ConfCacheClusterA1" property="multiplexerStack"/></property>
      <property name="cacheModeString"><inject bean="ConfCacheClusterA1" property="cacheModeString"/></property>
      <property name="listenerAsyncPoolSize"><inject bean="ConfCacheClusterA1" property="listenerAsyncPoolSize"/></property>
   </bean -->

   <bean name="ConfCacheClusterA1" class="org.jboss.cache.config.Configuration">
      <constructor factoryMethod="clone">
         <factory bean="ConfCacheClusterA"/>
      </constructor>
   </bean>   
   
   <bean name="CacheClusterA1" class="org.jboss.cache.Cache">
      <constructor factoryMethod="createCache">
          <factory bean="DefaultCacheFactory"/>
          <parameter class="org.jboss.cache.config.Configuration"><inject bean="ConfCacheClusterA1"/></parameter>
          <parameter class="boolean">false</parameter>
      </constructor>
   </bean>

   <!--  bean name="ConfCacheClusterA2" class="org.jboss.cache.config.Configuration">
      <constructor factoryMethod="clone">
         <factory bean="ConfCacheClusterA"/>
      </constructor>
   </bean>   

   <bean name="CacheClusterA2" class="org.jboss.cache.Cache">
      <constructor factoryMethod="createCache">
          <factory bean="DefaultCacheFactory"/>
          <parameter class="org.jboss.cache.config.Configuration"><inject bean="ConfCacheClusterA2"/></parameter>
          <parameter class="boolean">false</parameter>
      </constructor>
   </bean -->
   
</deployment>